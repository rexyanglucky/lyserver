{"version":3,"sources":["../../src/bll/article.js"],"names":["ArticleBll","constructor","dbHelper","saveArticle","callback","data","InsertDB","collectionName","result","console","log","insertedIds","getArticle","id","QueryDB","query","_id","getArticleList","param"],"mappings":"2EAAA,oC;AACA,kC;;;AAGA,MAAMA,UAAN,CAAiB;AACbC,kBAAc;AACV,aAAKC,QAAL,GAAgB,qBAAhB;AACH;AACD;;;;;AAKAC,gBAAYC,QAAZ,EAAsB,GAAGC,IAAzB,EAA+B;AAC3B,aAAKH,QAAL,CAAcI,QAAd,CAAuB;AACnBC,4BAAgB,SADG,EACQF,MAAMA,IADd,EACoBD,UAAWI,MAAD,IAAY;AACzDC,wBAAQC,GAAR,CAAYF,OAAOG,WAAnB;AACAP,yBAASI,OAAOG,WAAhB;AACH,aAJkB,EAAvB;;AAMH;AACD;;;;AAIAC,eAAWR,QAAX,EAAqB,GAAGS,EAAxB,EAA4B;AACxB,aAAKX,QAAL,CAAcY,OAAd,CAAsB;AAClBP,4BAAgB,SADE,EACSQ,OAAO,EAAEC,KAAK,uBAASH,GAAG,CAAH,CAAT,CAAP,EADhB,EAC0CT,UAAWI,MAAD,IAAY;AAC9EC,wBAAQC,GAAR,CAAYF,MAAZ;AACAJ,yBAASI,MAAT;AACH,aAJiB,EAAtB;;AAMH;AACD;;;;AAIA;AACAS,mBAAeb,QAAf,EAAyBc,KAAzB,EAAgC;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,aAAKhB,QAAL,CAAcY,OAAd,CAAsB;AAClBP,4BAAgB,SADE,EACSQ,OAAO,EADhB,EACoBX,UAAWI,MAAD,IAAY;AACxDC,wBAAQC,GAAR,CAAYF,MAAZ;AACAJ,yBAASI,MAAT;AACH,aAJiB,EAAtB;;AAMH,KA5DY,C;;AA8DFR,U","file":"article.js","sourcesContent":["import DBHelper from \"../db/mongo\"\r\nimport { ObjectId } from 'mongodb';\r\n\r\n\r\nclass ArticleBll {\r\n    constructor() {\r\n        this.dbHelper = new DBHelper();\r\n    }\r\n    /**\r\n     * \r\n     * @param {Array} data -要保存的文章数据 {title:\"\",content:\"\",author:\"\",createTime:new Date(),updateTime:new Date()}\r\n     * @param {Function} callback -成功回调函数\r\n     */\r\n    saveArticle(callback, ...data) {\r\n        this.dbHelper.InsertDB({\r\n            collectionName: \"article\", data: data, callback: (result) => {\r\n                console.log(result.insertedIds);\r\n                callback(result.insertedIds);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * 获取文章\r\n     * @param {Array} id \r\n     */\r\n    getArticle(callback, ...id) {\r\n        this.dbHelper.QueryDB({\r\n            collectionName: \"article\", query: { _id: ObjectId(id[0]) }, callback: (result) => {\r\n                console.log(result);\r\n                callback(result);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n * 获取文章\r\n * @param {Array} id \r\n */\r\n    //todo 根据post 条件获取列表\r\n    getArticleList(callback, param) {\r\n        // let query = { where: {}, sort: {}, page: { currentPage: 1, pageSize: 10 } };\r\n        // if (param) {\r\n        //     if (param.author) {\r\n        //         query.where[author] = param.author;\r\n        //     }\r\n        //     if (param.startDate) {\r\n        //         query.where[crateTime] = { \"$gte\": param.startDate };\r\n        //     }\r\n        //     if (param.endDate) {\r\n        //         query.where[crateTime] = { \"$lte\": param.endDate };\r\n        //     }\r\n        //     if (param.currentPage) {\r\n        //         query.page[currentPage] = param.currentPage;\r\n        //     }\r\n        //     if (param.pageSize) {\r\n        //         query.page[pageSize] = param.pageSize;\r\n        //     }\r\n        // }\r\n\r\n        this.dbHelper.QueryDB({\r\n            collectionName: \"article\", query: {}, callback: (result) => {\r\n                console.log(result);\r\n                callback(result);\r\n            }\r\n        });\r\n    }\r\n}\r\nexport default ArticleBll;"]}